<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="home.css">
  <link rel="stylesheet" href="shop.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

  <div class="product-shop">
    <div class="shop-image">
      <img src="images/shop-images.png" alt="Shop Background">

      <div class="overlay">
        <h1>Shop</h1>
        <p class="breadcrumb"><a href="home.html">Home</a> > Shop</p>
      </div>
    </div>
  </div>
  <div id="header-container"></div>
  </div>
  </div>
  <div class="top-bar">
    <div class="filter-wrapper">
      <div id="filterToggle" class="filter-label">
        <img src="images/filter.png" alt="Filter Icon" class="icon">
        <span class="filter-text">Filter</span>
        <div class="category-dropdown" id="categoryDropdown">
          <div class="cate-option" data-value="">All</div>
          <div class="cate-option" data-value="chair">Chair</div>
          <div class="cate-option" data-value="table">Table</div>
          <div class="cate-option" data-value="Sofa">Sofa</div>
        </div>
      </div>
    </div>

    <div id="view-toggle" class="view-toggle">
      <button id="grid-view-btn" title="D·∫°ng l∆∞·ªõi">
        <img src="images/girp-image.png" alt="Grid View">
      </button>
      <button id="list-view-btn" title="D·∫°ng danh s√°ch">
        <img src="images/list-image.png" alt="List View">
      </button>
    </div>

    <!-- Danh s√°ch s·∫£n ph·∫©m -->
    <div id="product-list" class="grid-view"></div>

    <div class="results-info">
      | Showing <span id="showing-count">1‚Äì16</span> of <span id="total-count">32</span> results
    </div>

    <div class="show-sort">
      <label>Show</label>
      <input type="number" value="16" class="show-input" id="show-input">

      <label>Sort by</label>
      <select id="sort-select" class="sort-select">
        <option value="default">Default</option>
        <option value="asc">Price: Low to High</option>
        <option value="desc">Price: High to Low</option>
      </select>
    </div>
  </div>


  <div class="our-product-image" id="our-product-image">  </div>
  <div class="pagination" id="pagination"></div>
  <div class="pagination">
  <a href="page1.html"><button class="active-page">1</button></a>
  <a href="page2.html"><button>2</button></a>
  <a href="page3.html"><button>3</button></a>
  <a href="page2.html"><button>Next</button></a>
</div>
 
  <div class="benefit-section">
    <div class="benefit-box">
      <img src="images/trophy.png" alt="High Quality">
      <div>
        <h4>High Quality</h4>
        <p>crafted from top materials</p>
      </div>
    </div>
    <div class="benefit-box">
      <img src="images/guarantee.png" alt="Warranty Protection">
      <div>
        <h4>Warranty Protection</h4>
        <p>Over 2 years</p>
      </div>
    </div>
    <div class="benefit-box">
      <img src="images/shipping.png" alt="Free Shipping">
      <div>
        <h4>Free Shipping</h4>
        <p>Order over 150 $</p>
      </div>
    </div>
    <div class="benefit-box">
      <img src="images/customer-support.png" alt="24 / 7 Support">
      <div>
        <h4>24 / 7 Support</h4>
        <p>Dedicated support</p>
      </div>
    </div>
  </div>

     <div id="footer"></div>

      <script>
        fetch("footer.html")
            .then(res => res.text())
            .then(data => {
                document.getElementById("footer").innerHTML = data;
            });
      </script>
    

  <script>
    let itemlist = [
      {
        image: "/images/product-1.png",
        name: "Syltherine",
        type: "Stylish cafe chair",
        price: 2500000,
        disprice: 3500000,
        sale: -30,

      },
      {
        image: "/images/product-2.png",
        name: "Leviosa",
        type: "Stylish cafe chair",
        price: 2500000,
        disprice: "",
        sale: "",
      }, {
        image: "/images/product-3.png",
        name: "Lolito",
        type: "Luxury big sofa",
        price: 7000000,
        disprice: 14000000,
        sale: -50,

      }, {
        image: "/images/product-4.png",
        name: "Respira",
        type: "Outdoor bar table and stool",
        price: 500000,
        sale: "New",

      }, {
        image: "/images/product-1.png",
        name: "Syltherine",
        type: "Stylish cafe chair",
        price: 2500000,
        disprice: 3500000,
        sale: -30,

      },
      {
        image: "/images/product-2.png",
        name: "Leviosa",
        type: "Stylish cafe chair",
        price: 2500000,
        disprice: "",
        sale: "",
      }, {
        image: "/images/product-3.png",
        name: "Lolito",
        type: "Luxury big sofa",
        price: 7000000,
        disprice: 14000000,
        sale: -50,

      }, {
        image: "/images/product-4.png",
        name: "Respira",
        type: "Outdoor bar table and stool",
        price: 500000,
        sale: "New",

      }, {
        image: "/images/product-1.png",
        name: "Syltherine",
        type: "Stylish cafe chair",
        price: 2500000,
        disprice: 3500000,
        sale: -30,

      },
      {
        image: "/images/product-2.png",
        name: "Leviosa",
        type: "Stylish cafe chair",
        price: 2500000,
        disprice: "",
        sale: "",
      }, {
        image: "/images/product-3.png",
        name: "Lolito",
        type: "Luxury big sofa",
        price: 7000000,
        disprice: 14000000,
        sale: -50,

      }, {
        image: "/images/product-4.png",
        name: "Respira",
        type: "Outdoor bar table and stool",
        price: 500000,
        sale: "New",

      }, {
        image: "/images/product-1.png",
        name: "Syltherine",
        type: "Stylish cafe chair",
        price: 2500000,
        disprice: 3500000,
        sale: -30,

      },
      {
        image: "/images/product-2.png",
        name: "Leviosa",
        type: "Stylish cafe chair",
        price: 2500000,
        disprice: "",
        sale: "",
      }, {
        image: "/images/product-3.png",
        name: "Lolito",
        type: "Luxury big sofa",
        price: 7000000,
        disprice: 14000000,
        sale: -50,

      }, {
        image: "/images/product-4.png",
        name: "Respira",
        type: "Outdoor bar table and stool",
        price: 500000,
        sale: "New",

      }
    ]


    let src = document.getElementById("our-product-image")
    function formatProductHTML(x) {
      let priceFormatted = x.price.toLocaleString("vi-VN");
      let dispriceFormatted = x.disprice ? x.disprice.toLocaleString("vi-VN") : "";
      let saleBadge = "";

      if (x.sale) {
        if (typeof x.sale === "string" && x.sale.trim().toLowerCase() === "new") {
          saleBadge = `<div class="bubble new"><h5>New</h5></div>`;
        } else if (!isNaN(x.sale)) {
          saleBadge = `<div class="bubble sale"><h5>${x.sale}%</h5></div>`;
        }
      }

      let dispriceHTML = dispriceFormatted
        ? `<h3 class="dis-price">Rb ${dispriceFormatted}</h3>`
        : "";

     return `
        <div class="product-content" ondblclick="window.location.href='product.html'">
            <div class="product-main">
              <div style="display: flex; flex-direction: column;">
                <div style="position: relative">
                  <img class="image" src="${x.image}" alt="">
                  ${saleBadge}
                </div>
                <div class="content">
                  <h1 class="name">${x.name}</h1>
                  <h2 class="type">${x.type}</h2>
                  <div class="price">
                    <h3 class="real-price">Rp ${priceFormatted}</h3>
                    ${dispriceHTML}
                  </div>
                </div>
              </div>
            </div>
            <div class="more-info">
               <a href="cart.html" class="addcart-btn" onclick="addToCart('${x.name}', ${x.price}, '${x.image}')">add to cart</a>
              <div class="more-info-bottom">
                <a class="info-link" href="#"><img src="/images/Frame 11.png" alt=""></a>
                <a class="info-link" href="#"><img src="/images/Frame 12.png" alt=""></a>
                <a class="info-link" href="#"><img src="/images/Frame 10.png" alt=""></a>
              </div>
            </div>
          </div>`;
          
    }
  </script>
  <script>
    let currentPage = 1;
    let itemsPerPage = 16;

    const container = document.getElementById("our-product-image");
     const containers = document.getElementById('product-list');
const gridBtn = document.getElementById('grid-view-btn');
const listBtn = document.getElementById('list-view-btn');
    const showInput = document.getElementById("show-input");
    const sortSelect = document.getElementById("sort-select");
    const searchInput = document.getElementById("search-input");
    const cateOption = document.getElementsByClassName("cate-option")
    const fullItemList = itemlist;
    let filteredList = [...fullItemList]; 

    
gridBtn.addEventListener('click', () => {
  container.classList.add('grid-view');
  container.classList.remove('list-view');
});

listBtn.addEventListener('click', () => {
  container.classList.add('list-view');
  container.classList.remove('grid-view');
});

function renderProducts() {
      container.innerHTML = "";

      let start = (currentPage - 1) * itemsPerPage;
      let end = start + itemsPerPage;
      let pageItems = filteredList.slice(start, end);

      pageItems.forEach(item => {
        container.innerHTML += formatProductHTML(item);
      });

      document.getElementById("showing-count").textContent = 
        `${start + 1}‚Äì${Math.min(end, filteredList.length)}`;
      document.getElementById("total-count").textContent = filteredList.length;

      renderPagination();
      attachAddToCartEvents();
    }

    let currentCategory = "";

    const toggle = document.getElementById("filterToggle");
    const dropdown = document.getElementById("categoryDropdown");

    toggle.addEventListener("click", () => {
      dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
    });

    // ·∫®n dropdown n·∫øu click ngo√†i v√πng
    document.addEventListener("click", function (e) {
      if (!toggle.contains(e.target) && !dropdown.contains(e.target)) {
        dropdown.style.display = "none";
      }
    });
    const applyFiltersAndSort = (cate) => {
      filteredList=[...fullItemList.filter(x=>x.type.toLocaleLowerCase().includes(cate.toLocaleLowerCase()))]
      if(cate.toLocaleLowerCase() == "all"){
        filteredList =fullItemList
      }
      renderProducts()
      dropdown.style.display = "none";
    }

    // X·ª≠ l√Ω ch·ªçn lo·∫°i
    dropdown.querySelectorAll("div").forEach(option => {
      option.addEventListener("click", () => {
        const value = option.getAttribute("data-value");
        currentCategory = value; // << TH√äM D√íNG N√ÄY
        
        applyFiltersAndSort(value);
      });
    });



    // S·∫Øp x·∫øp theo gi√°
    sortSelect.addEventListener("change", function () {
      sortAndRender();
    });

    function sortAndRender() {
      const sortValue = sortSelect.value;

      if (sortValue === "asc") {
        filteredList.sort((a, b) => a.price - b.price);
      } else if (sortValue === "desc") {
        filteredList.sort((a, b) => b.price - a.price);
      } else {
        filteredList = [...fullItemList.filter(item =>
          item.name.toLowerCase().includes(searchInput.value.toLowerCase())
        )];
      }

      renderProducts();
    }

    // Thay ƒë·ªïi s·ªë s·∫£n ph·∫©m/trang
    showInput.addEventListener("change", function () {
      itemsPerPage = parseInt(this.value) || 16;
      currentPage = 1;
      renderProducts();
    });

    // Kh·ªüi ƒë·ªông
    renderProducts();
  </script>
  </script>
 
<script>
  const addToCartButtons = document.querySelectorAll(".add-to-cart-btn");

  addToCartButtons.forEach(button => {
    button.addEventListener("click", () => {
      const name = button.getAttribute("data-name");
      const price = parseInt(button.getAttribute("data-price"));
      const image = button.getAttribute("data-image");

      const product = {
        name,
        price,
        image,
        quantity: 1
      };

      // L·∫•y gi·ªè h√†ng hi·ªán t·∫°i (n·∫øu c√≥)
      let cart = JSON.parse(localStorage.getItem("cart")) || [];

      // Ki·ªÉm tra n·∫øu s·∫£n ph·∫©m ƒë√£ t·ªìn t·∫°i ‚Üí tƒÉng s·ªë l∆∞·ª£ng
      const existingProduct = cart.find(item => item.name === product.name);
      if (existingProduct) {
        existingProduct.quantity += 1;
      } else {
        cart.push(product);
      }

      localStorage.setItem("cart", JSON.stringify(cart));

      // Chuy·ªÉn sang trang gi·ªè h√†ng
      window.location.href = "cart.html";
    });
  });


  function attachAddToCartEvents() {
    const addToCartButtons = document.querySelectorAll(".add-to-cart-btn");

    addToCartButtons.forEach(button => {
      button.addEventListener("click", () => {
        const name = button.getAttribute("data-name");
        const price = parseInt(button.getAttribute("data-price"));
        const image = button.getAttribute("data-image");

        const product = { name, price, image, quantity: 1 };

        let cart = JSON.parse(localStorage.getItem("cart")) || [];

        const existingProduct = cart.find(item => item.name === product.name);
        if (existingProduct) {
          existingProduct.quantity += 1;
        } else {
          cart.push(product);
        }

        localStorage.setItem("cart", JSON.stringify(cart));

        // üëâ Sau khi th√™m v√†o cart, chuy·ªÉn qua trang cart
        window.location.href = "cart.html";
      });
    });
  }

//Th√™m v√† cart
  function addToCart(name, price, image) {
    const product = {
      name,
      price,
      image,
      quantity: 1
    };

    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    const existingProduct = cart.find(item => item.name === product.name);
    if (existingProduct) {
      existingProduct.quantity += 1;
    } else {
      cart.push(product);
    }

    localStorage.setItem("cart", JSON.stringify(cart));

    // Chuy·ªÉn sang trang gi·ªè h√†ng
    window.location.href = "cart.html";
  }
</script>



</body>

<script>
  fetch("header.html")
    .then(res => res.text())
    .then(data => {
      document.getElementById("header-container").innerHTML = data;
    });
</script>

</html>